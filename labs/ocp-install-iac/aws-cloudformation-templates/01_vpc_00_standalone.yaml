AWSTemplateFormatVersion: 2010-09-09
Description: Template for VPC

Parameters:
  VpcCidr:
    AllowedPattern: ^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(1[6-9]|2[0-4]))$
    ConstraintDescription: CIDR block parameter must be in the form x.x.x.x/16-24.
    Default: 10.0.0.0/16
    Description: CIDR block for VPC.
    Type: String
  NamePrefix:
    AllowedPattern: ^([a-zA-Z][a-zA-Z0-9\-]{0,26})$
    MaxLength: 27
    MinLength: 1
    ConstraintDescription: Cluster name must be alphanumeric, start with a letter, and have a maximum of 27 characters.
    Description: A short, representative cluster name to use for host names and other identifying names.
    Type: String

Resources:
  VPC:
    Type: "AWS::EC2::VPC"
    Properties:
      EnableDnsSupport: "true"
      EnableDnsHostnames: "true"
      CidrBlock: !Ref VpcCidr
      Tags:
      - Key: Name
        Value: !Join ['-', [!Ref NamePrefix, "vpc"]]

  # IPv6CidrBlock:
  #   Type: AWS::EC2::VPCCidrBlock
  #   Properties:
  #       AmazonProvidedIpv6CidrBlock: true
  #       VpcId: !Ref VPC

Outputs:
  VpcId:
    Description: ID of the new VPC.
    Value: !Ref VPC
  CidrBlock:
    Description: ID of the new VPC.
    Value: !GetAtt VPC.CidrBlock
  # Ipv6CidrBlocks:
  #   Description: IPv6 CIDR block.
  #   Value: !GetAtt VPC.Ipv6CidrBlocks