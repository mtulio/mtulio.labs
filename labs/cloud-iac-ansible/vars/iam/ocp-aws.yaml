---
iam_roles:
- name: "{{ ocp_iam_profile_bootstrap }}"
  providers:
    - aws
  assume_doc_type: file
  assume_doc_name: "aws-ec2-assume.json"
  # TODO fix it:
  managed_policies:
    - arn:aws:iam::aws:policy/AdministratorAccess
  #policy_document: {}
  tags: "{{ cluster_state.tags }}"
  custom_policies:
    - name: s3-ro-bootstrap
      file_type: template
      file_path: aws-s3-policy-ro.json.j2
      bucket: "{{ ocp_install_infraID }}-infra"
    - name: ocp-bootstrap
      policy_json: |
          {
            "Version": "2012-10-17",
            "Statement": [
                {
                    "Sid": "VisualEditor0",
                    "Effect": "Allow",
                    "Action": [
                        "ec2:Describe*",
                        "ec2:AttachVolume",
                        "ec2:DetachVolume",
                        "s3:GetObject"
                    ],
                    "Resource": "*"
                }
            ]
          }

- name: "{{ ocp_iam_profile_controlplane }}"
  providers:
    - aws
  assume_doc_type: file
  assume_doc_name: "aws-ec2-assume.json"
  # TODO fix it:
  managed_policies:
    - arn:aws:iam::aws:policy/AdministratorAccess
  #policy_document: {}
  tags: "{{ cluster_state.tags }}"
  custom_policies: []
